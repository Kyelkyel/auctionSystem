<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" th:href="@{/css/auction-detail.css}" />
    <title th:text="${auctionVar.auctionItem.itemTitle}">Auction Detail</title>
</head>
<body>
<header> 
    <nav class="navbar">
      <section id="home">
           <ul class="nav-links">
            <li><a href="#home">Home</a></li>
            <li><a href="/admin">Auctions</a></li>
            <li><a href="/contact">Contact</a></li>
        </ul>
      </section>
     </nav>
     
      <div class="logo">KoolBulls</div>

    <button id="menuBtn">☰</button>
      
    <div id="sidebar" class="sidebar">
      <button id="closeBtn">×</button>

      <div class="profile">
         <img th:src="@{/images/pfptest.jpg}" alt="Profile picture" class="avatar" />
       <div class="userinfo">
         <strong>USER 01</strong>
         <span class="handle">@user01</span>
       </div>
     </div>
    
    <ul>
      <li><a href="/yourProfile">Your profile</a></li>
      <li><a href="/sell-item">Sell Items</a></li>
      <li><a href="/bidding-history">Bidding History</a></li>
      <li><a href="/settings">Settings</a></li>
      <li><a href="/logout">Sign out</a></li>
    </ul>
  
   <div id="overlay" class="overlay"></div>
  </div>
</header>

<div class="Detail-page">
    <div class="auction-detail">
      <div class="auction-header">
        <img th:src="@{${auctionVar.auctionItem.itemImage}}" alt="Product Image" id="product-img" />
        <div class="auction-info">
          <h2 id="product-title" th:text="${auctionVar.auctionItem.itemTitle}">Item Title</h2>
          <div class="timer" id="timer" 
               th:text="'Starts at: ' + ${#temporals.format(auctionVar.auctionItem.startTime, 'yyyy-MM-dd HH:mm')}">Start Time</div>
          <div class="auction-price" id="price" th:text="${auctionVar.currentPrice}">Current Price</div>
          <button class="bid-button">PLACE BID</button>
          <div class="buy-now">Buy it now for <span id="buy-price" th:text="${auctionVar.auctionItem.startingBid}">Starting Bid</span></div>
          <div>
            <strong>Status:</strong> <span th:text="${auctionVar.auctionStatus}">Auction Status</span>
          </div>
        </div>
      </div>

      <section class="history">
        <h3>Bid History</h3>
        <table>
          <thead>
            <tr>
              <th>User</th>
              <th>Bid Amount</th>
              <th>Bid Time</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="bid : ${bids}">
              <td th:text="${bid.username}">Bidder</td>
              <td th:text="${bid.amount}">Bid Amount</td>
              <td th:text="${#temporals.format(bid.time, 'HH:mm a')}">Bid Time</td>
              <td th:text="${bid.status}" 
                  th:style="${bid.status == 'Highest Bid'} ? 'color: green; font-weight: bold;' : ''">Status</td>
            </tr>
          </tbody>
        </table>
      </section>

      <section class="product-extra">
        <div class="description-section">
          <h3>Description</h3>
          <p th:text="${auctionVar.auctionItem.itemDescription}">
            Item description goes here.
          </p>
        </div>
      </section>

      <section class="seller-section">
        <h3>Seller Information</h3>
        <p><strong>Name:</strong> <span th:text="${auctionVar.auctionItem.sellerInfoName}">Seller Name</span></p>
        <p><strong>Email:</strong> <span th:text="${auctionVar.auctionItem.sellerInfoEmail}">Seller Email</span></p>
        <p><strong>Phone:</strong> <span th:text="${auctionVar.auctionItem.sellerInfoPhone}">Seller Phone</span></p>
        <p><strong>Location:</strong> <span th:text="${auctionVar.auctionItem.sellerInfoLocation}">Seller Location</span></p>
      </section>

      <div id="bid-modal" class="modal" style="display:none;">
        <div class="modal-content">
          <span id="close-bid-modal" class="close">&times;</span>
          <h3>Place Your Bid</h3>
          <input type="text" id="bid-username" placeholder="Username" readonly />
          <input type="number" id="bid-amount" placeholder="Bid Amount" min="0.01" step="0.01" required />
          <textarea id="bid-comments" placeholder="Comments (optional)"></textarea>
          <button id="submit-bid">Submit Bid</button>
        </div>
      </div>
    </div>
</div>

<script th:src="@{/javascript/Bid-Button.js}"></script>
<script th:src="@{/javascript/Profile.js}" defer></script>
</body>
</html>
